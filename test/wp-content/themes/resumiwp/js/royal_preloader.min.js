window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1000/60)}})();var Royal_Preloader={_overlay:null,_overlay_bg:null,_loader:null,_name:null,_percentage:null,_on_complete:null,_text_loader:null,_text_loader_overlay:null,_logo_loader:null,_logo_loader_meter:null,_total:0,_loaded:0,_image_queue:[],_percentage_loaded:0,_mode:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._mode!=="undefined"?Royal_Preloader._mode:"number"}(),_text:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._text!=="undefined"?Royal_Preloader._text:"loading..."}(),_opacity:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._opacity!=="undefined"?Royal_Preloader._opacity:1}(),_images:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._images!=="undefined"?Royal_Preloader._images:{}}(),_show_info:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._show_info!=="undefined"?Royal_Preloader._show_info:true}(),_show_percentage:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._show_percentage!=="undefined"?Royal_Preloader._show_percentage:true}(),_background:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._background!=="undefined"?Royal_Preloader._background:["#000000"]}(),_logo:function(){return typeof Royal_Preloader!=="undefined"&&typeof Royal_Preloader._logo!=="undefined"?Royal_Preloader._logo:"none"}(),_timeout:10,_use_css_animation:true,_css3SupportDetect:function(){var b=document.body.style;if(typeof b.transition=="string"){Royal_Preloader._use_css_animation=true;return true}var c=["Webkit","Moz","Khtml","O","ms"];for(var a=0;a<c.length;a++){if(typeof(b[c[a]+"Transition"])=="string"){Royal_Preloader._use_css_animation=true;return true}}Royal_Preloader._use_css_animation=false;return false},_init:function(){Royal_Preloader._css3SupportDetect();Royal_Preloader._total=0;$.each(Royal_Preloader._images,function(){Royal_Preloader._total++});Royal_Preloader._build();Royal_Preloader._load()},_build:function(){this._overlay=$("<div>").attr("id","royal_preloader").addClass(this._mode);this._overlay_bg=$("<div>").addClass("background").appendTo(this._overlay).css("background-color",this._background[0]);if(this._mode==="number"){this._percentage=$("<div>").addClass("percentage").appendTo(this._overlay)}else{if(this._mode==="text"){this._text_loader=$("<div>").addClass("loader").text(this._text).appendTo(this._overlay);this._text_loader_overlay=$("<div>").css("background-color",this._background[0]).appendTo(this._text_loader)}else{this._logo_loader=$("<div>").css("background-image",'url("'+this._logo+'")').addClass("loader").appendTo(this._overlay);this._logo_loader_meter=$("<div>").css("background-color",this._background[0]).appendTo(this._logo_loader);this._percentage=$("<div>").css("background-color",this._background[0]).addClass("percentage").appendTo(this._overlay);if(!this._show_percentage){this._percentage.hide()}}}if(this._opacity!==1){this._overlay_bg.css("opacity",this._opacity);$(document.body).css("visibility","visible")}this._overlay.appendTo($(document.body));if(this._mode==="text"){this._text_loader.css("margin-left",this._text_loader.width()/2*-1)}},_load:function(){if(this._mode==="number"||this._mode==="logo"){this._percentage.data("num",0);if(this._show_percentage){this._percentage.text("0%")}}$.each(this._images,function(a,c){var b=function(){Royal_Preloader._imageOnLoad(a,c)};var d=new Image();d.onload=b;d.onerror=b;d.src=c});setTimeout(function(){if(Royal_Preloader._overlay){Royal_Preloader._animatePercentage(Royal_Preloader._percentage_loaded,100)}},this._timeout*1000)},_animatePercentage:function(b,a){Royal_Preloader._percentage_loaded=b;if(b<a){b++;setTimeout(function(){if(Royal_Preloader._mode==="number"){if(Royal_Preloader._show_percentage){Royal_Preloader._percentage.text(b+"%")}}else{if(Royal_Preloader._mode==="text"){Royal_Preloader._text_loader_overlay.css("left",b+"%")}else{if(Royal_Preloader._show_percentage){Royal_Preloader._percentage.text(b+"%")}Royal_Preloader._logo_loader_meter.css("bottom",b+"%")}}Royal_Preloader._animatePercentage(b,a)},5);if(b===100){Royal_Preloader._loadFinish()}}},_animateName:function(a,c){if(this._mode==="number"){this._name=$("<div>").addClass("name").text(a).appendTo(this._overlay);var b=this._name;requestAnimFrame(function(){b.css("transform","rotateZ("+parseInt(Math.random()*60-30)+"deg)")});if(!this._use_css_animation){this._name.css({opacity:1,top:"50%"});this._name.animate({top:"20%",opacity:0},300);this._overlay_bg.animate({backgroundColor:this._background[this._loaded%this._background.length]},300,"linear")}else{this._overlay_bg.css("background-color",this._background[this._loaded%this._background.length])}}setTimeout(function(){c()},300)},_imageOnLoad:function(a,b){this._image_queue.push({name:a,image_src:b});if(this._image_queue.length&&this._image_queue[0].image_src===b){this._processQueue()}},_reQueue:function(){Royal_Preloader._image_queue.splice(0,1);Royal_Preloader._processQueue()},_processQueue:function(){if(this._image_queue.length===0){return}this._loaded++;Royal_Preloader._animatePercentage(Royal_Preloader._percentage_loaded,parseInt(100*(this._loaded/this._total),10));if(this._show_info){this._animateName(this._image_queue[0].name,this._reQueue)}else{this._reQueue()}},_loadFinish:function(){if(this._use_css_animation){this._overlay.addClass("complete");$(document.body).removeClass("royal_loader")}else{setTimeout(function(){Royal_Preloader._overlay.addClass("complete");$(document.body).removeClass("royal_loader")},500)}if(this._on_complete){this._on_complete()}setTimeout(function(){Royal_Preloader._overlay.remove();Royal_Preloader._overlay=null},1000)},config:function(a){if(typeof a.mode!=="undefined"){this._mode=a.mode}if(typeof a.text!=="undefined"){this._text=a.text}if(typeof a.timeout!=="undefined"){this._timeout=parseInt(a.timeout)}if(typeof a.showPercentage!=="undefined"){this._show_percentage=a.showPercentage?true:false}if(typeof a.showInfo!=="undefined"){this._show_info=a.showInfo?true:false}if(typeof a.background!=="undefined"){this._background=a.background}if(typeof a.logo!=="undefined"){this._logo=a.logo}if(typeof a.opacity!=="undefined"){this._opacity=a.opacity}if(typeof a.onComplete!=="undefined"){this._on_complete=a.onComplete}if(typeof a.images!=="undefined"){this._images=a.images;console.log(a.images);Royal_Preloader._total=0;try{$.each(this._images,function(c,d){Royal_Preloader._total++})}catch(b){}}}};(function(a){})(jQuery);